<!-- This is tests to create a note taking website. I'm just trying out new possible things so yea. -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        
    </style>
</head>
<body>
    <button><a href = "/index.html" style = "text-decoration: none;">Back to Main Page</a></button> <br> <br>
    <textarea id = "notes" name = "notes" rows = "10" colums = "100" placeholder = "Write your notes..."></textarea>
    <button id = 'submit'>Submit</button>
    <div id = "noteList"></div>

    <script>
        const textBox = document.getElementById("notes");
        const submitButton = document.getElementById("submit");
        const noteList = document.getElementById("noteList");

        let allNotes = JSON.parse(localStorage.getItem("allNotes")) || []; // This array will contain all notes to be saved into the local storage of the computer

        renderNotes();

        submitButton.onclick = function submit() {
            allNotes.push(textBox.value); // Adds notes to a single array
            console.log(allNotes);
            localStorage.setItem("allNotes", JSON.stringify(allNotes)) // Saves array into local storage

            textBox.value = ""; // Clears text box
            renderNotes();
        }

        function renderNotes() {
            noteList.textContent = "";
            for (let i = 0; i < allNotes.length; i++) {
                element = allNotes[i]
                singleNoteRender(element, i);
            }
            
        }

        function singleNoteRender(text, index) {
            const note = document.createElement('div'); // Creates div element that contains the note submitted
            note.textContent = text;
            noteList.appendChild(note);

            const editButton = document.createElement('button'); // Creates edit button alongside the note submitted
            editButton.textContent = "Edit";
            note.appendChild(editButton);

            const deleteButton = document.createElement('button'); // Creates delete button alongside the note submitted
            deleteButton.textContent = "Delete";
            note.appendChild(deleteButton);

            editButton.onclick = function editNote() {
                editButton.remove(); // Edit button disappears after it is clicked
                deleteButton.remove(); // Delete button also disappears after edit is clicked
                textBox.value = note.textContent;

                const saveButton = document.createElement('button'); // Creates save button for the edit
                saveButton.textContent = "Save";
                textBox.insertAdjacentElement("afterend", saveButton);

                submitButton.remove(); // Save replaces submit when editing

                saveButton.onclick = function saveEdit() {
                    note.textContent = textBox.value;
                    allNotes[index] = textBox.value; // Saves edits into local storage
                    console.log(allNotes);
                    localStorage.setItem("allNotes", JSON.stringify(allNotes));
                    textBox.value = "";

                    saveButton.remove();
                    textBox.insertAdjacentElement("afterend", submitButton); // Submit button is brought back
                    
                    note.appendChild(editButton);
                    note.appendChild(deleteButton);
                }
            }

            deleteButton.onclick = function deleteNote() {
                allNotes.splice(index, 1);
                localStorage.setItem("allNotes", JSON.stringify(allNotes));
                renderNotes(); // All notes rendered again after deleted note is removed from notes array
            }
        }
    </script>
</body>
</html>

<!--

Component ideas
    - Note list display
    - Note creation
        - Adding text
        - Adding longer text
        - Saving the text into a list
    - Note editing
    - Note deleting
    - Back go main page buttons

Saving notes within a different file (no idea if this is even possible)
    - Saving onto local storage
    - Saving edits onto local storage
    - Rendering all of the notes from the local storage
    - Integrate with editing
    
Styling the website

-->